import{r as n,j as e,M as Y,k as r,ej as j,ek as H,l as $,el as z,m as U,p as V,i as q,f as J,S as D,T as K,H as Q}from"./index-w2TjI0MF.js";import{C as X}from"./custom-breadcrumbs-RjSW2biQ.js";import{D as y}from"./DatePicker-fnQuhWtt.js";import{f as Z,F as _,I as ee}from"./TextField-Rnx-roig.js";import{S as te}from"./Select-fj7_ZCHL.js";import{i as ae}from"./format-time-gLo4N_aV.js";import{G as re}from"./report-DSHl0PIZ.js";import{B as i}from"./Box-wOnCFSTh.js";import{E as g}from"./empty-content-euVssf39.js";import{B as se}from"./Button-craGvtks.js";import{C as oe}from"./Card-huoyhVY-.js";import{D as le}from"./DataGrid-dgsGCI5B.js";import{G as ne,a as ie}from"./GridToolbarColumnsButton-MIv13JiJ.js";import"./index-q81m-9gd.js";import"./DialogActions-UxlkhUlJ.js";import"./ListItem-egfm1Owt.js";import"./isMuiElement-c8Cd3wTs.js";import"./Chip-xwffwAcK.js";import"./DialogContent-ITde-Yrn.js";import"./dialogTitleClasses-DEvrnnr4.js";import"./Autocomplete-zVr0giqp.js";import"./Close-f2MhZoYf.js";import"./ClickAwayListener--d0jk-Rq.js";import"./Checkbox-MPmUmIhR.js";import"./SwitchBase-0oakK23s.js";import"./Switch-uNCmthE_.js";import"./Skeleton-t3WH1W5x.js";import"./CircularProgress-DldaBh_H.js";import"./TablePagination-cyjZ-mNp.js";import"./KeyboardArrowRight-IzA2QHP7.js";import"./FirstPage-R9DouRzM.js";import"./TableCell-Fp4KwiAp.js";import"./FormControlLabel-i471xspq.js";function v({filters:t,onFilters:o,dateError:d,GetAllCompanyData:l,selectCompany:m,setSelectCompany:u}){const x=n.useCallback(s=>{u(s.target.value),o("companyId",s.target.value)},[o]),b=n.useCallback(s=>{o("startDate",s)},[o]),c=n.useCallback(s=>{o("endDate",s)},[o]);return e.jsxs(e.Fragment,{children:[e.jsx(y,{label:"Start date",value:t.startDate,onChange:b,slotProps:{textField:{fullWidth:!0}},sx:{maxWidth:{md:300}}}),e.jsx(y,{label:"End date",value:t.endDate,onChange:c,slotProps:{textField:{fullWidth:!0,error:d}},sx:{maxWidth:{md:300},[`& .${Z.root}`]:{position:{md:"absolute"},bottom:{md:-40}}}}),e.jsxs(_,{sx:{maxWidth:{md:240},width:"100%"},children:[e.jsx(ee,{id:"demo-simple-select-helper-label",shrink:!!m,children:"Company Name"}),e.jsx(te,{labelId:"demo-simple-select-helper-label",id:"demo-simple-select-helper",value:m,label:"Company Name",onChange:x,children:l==null?void 0:l.map(s=>e.jsx(Y,{value:s.companyId,children:s.companyName},s.companyId))})]})]})}v.propTypes={dateError:r.bool,filters:r.object,onFilters:r.func};function S({params:t}){return e.jsx(i,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},children:t.row.docNumber})}S.propTypes={params:r.shape({row:r.object})};function W({params:t}){return e.jsx(i,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},children:t.row.name})}W.propTypes={params:r.shape({row:r.object})};function N({params:t}){return e.jsx(i,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},children:j(t.row.date)})}N.propTypes={params:r.shape({row:r.object})};function R({params:t}){return e.jsx(i,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},children:t.row.class})}R.propTypes={params:r.shape({row:r.object})};function I({params:t}){return e.jsx(i,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},children:t.row.account})}I.propTypes={params:r.shape({row:r.object})};function M({params:t}){return e.jsx(i,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},children:t.row.type})}M.propTypes={params:r.shape({row:r.object})};function F({params:t}){return e.jsx(i,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},children:`${H(t.row.amount)}`})}F.propTypes={params:r.shape({row:r.object})};function k({params:t}){return e.jsx(i,{sx:{whiteSpace:"wrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},children:t.row.description})}k.propTypes={params:r.shape({row:r.object})};r.shape({row:r.object});function E(){const t=new Date;return new Date(t.setDate(t.getDate()-7))}const T={search:"",startDate:E(),endDate:new Date,companyId:""};function de(){$();const{GetAllCompanyData:t}=z(),[o,d]=n.useState(!0),[l,m]=n.useState(T),u=ae(l.startDate,l.endDate),[x,b]=n.useState([]),[c,s]=n.useState(0),[f,C]=n.useState(null);n.useEffect(()=>{o&&O()},[o,f]),n.useEffect(()=>{var a;t.length>0&&f===null&&C((a=t[0])==null?void 0:a.companyId)},[t]);const O=async()=>{const a={searchStartDate:j(l.startDate),searchEndDate:j(l.endDate),search:l.search,companyId:f||l.companyId},{result:p,isLoading:w}=await re(a),h=(p==null?void 0:p.map((A,L)=>({...A,id:L})))||[];s(h==null?void 0:h.length),b(h),d(w)},B=n.useCallback((a,p)=>{m(w=>({...w,[a]:p})),d(!0)},[]),G=()=>{const a={...T,startDate:E(),endDate:new Date};m(a),d(!0)},P=[{field:"type",headerName:"Transaction Type",minWidth:150,editable:!1,hideable:!1,filterable:!1,renderCell:a=>e.jsx(M,{params:a})},{field:"date",headerName:"Date",minWidth:120,editable:!1,hideable:!1,filterable:!1,renderCell:a=>e.jsx(N,{params:a})},{field:"docNumber",headerName:"Num",flex:1,minWidth:250,filterable:!1,disableColumnMenu:!0,renderCell:a=>e.jsx(S,{params:a})},{field:"name",headerName:"Name",editable:!1,flex:1,minWidth:250,filterable:!1,disableColumnMenu:!0,renderCell:a=>e.jsx(W,{params:a})},{field:"description",headerName:"Memo/Description",editable:!1,minWidth:600,filterable:!1,disableColumnMenu:!0,renderCell:a=>e.jsx(k,{params:a})},{field:"account",headerName:"Account",editable:!1,minWidth:250,filterable:!1,disableColumnMenu:!0,renderCell:a=>e.jsx(I,{params:a})},{field:"class",headerName:"Class",editable:!1,minWidth:180,filterable:!1,disableColumnMenu:!0,renderCell:a=>e.jsx(R,{params:a})},{field:"amount",headerName:"Amount",editable:!1,minWidth:180,filterable:!1,disableColumnMenu:!0,renderCell:a=>e.jsx(F,{params:a})}];return e.jsx(e.Fragment,{children:e.jsxs(U,{maxWidth:!1,sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[e.jsx(X,{heading:"Transaction Details by Account",links:[{name:"Dashboard",href:V.dashboard.root},{name:"Transaction Detail Report"}],action:e.jsx(q,{display:"flex",gap:2,children:e.jsx(se,{variant:"outlined",startIcon:e.jsx(J,{icon:"material-symbols:refresh"}),onClick:G,children:"Refresh"})}),sx:{mb:{xs:3,md:5}}}),e.jsxs(oe,{sx:{height:{xs:800,md:2},flexGrow:{md:1},display:{md:"flex"},flexDirection:{md:"column"}},children:[e.jsx(le,{rowCount:c,rows:x,columns:P,loading:o,paginationMode:"server",pageSizeOptions:[],hideFooterPagination:!0,disableColumnMenu:!0,slots:{toolbar:()=>e.jsx(e.Fragment,{children:e.jsxs(ne,{children:[e.jsx(v,{filters:l,dateError:u,onFilters:B,setSelectCompany:C,selectCompany:f,GetAllCompanyData:t}),e.jsx(D,{spacing:1,flexGrow:1,direction:"row",alignItems:"center",justifyContent:"flex-end",children:e.jsx(ie,{})})]})}),noRowsOverlay:()=>e.jsx(g,{title:"No Data"}),noResultsOverlay:()=>e.jsx(g,{title:"No results found"})}}),e.jsx(D,{sx:{p:2,display:"flex",justifyContent:"flex-end",flexDirection:"row"},children:e.jsxs(K,{variant:"body2",sx:{pr:2},children:["1â€“0 of ",c]})})]})]})})}function $e(){return e.jsxs(e.Fragment,{children:[e.jsx(Q,{children:e.jsx("title",{children:"  Transaction Details Report "})}),e.jsx(de,{})]})}export{$e as default};
