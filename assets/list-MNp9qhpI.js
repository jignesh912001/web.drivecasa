import{r as n,j as e,M as Y,k as r,eh as j,ei as H,l as $,ej as q,m as z,p as U,i as V,q as J,f as K,S as D,T as Q,H as X}from"./index-Ks3TOSIq.js";import{C as Z}from"./custom-breadcrumbs-W9bDBBuU.js";import{D as y}from"./DatePicker-6LxWtsRu.js";import{f as _,F as ee,I as te}from"./TextField-tOSLX-sg.js";import{S as ae}from"./Select-tvpX3YFo.js";import{i as re}from"./format-time-3AQVHoBL.js";import{G as se}from"./report-kcgUZtlH.js";import{B as i}from"./Box-x_y77R_r.js";import{E as g}from"./empty-content-8lsYOAb1.js";import{C as oe}from"./Card-vdcIGYi0.js";import{D as le}from"./DataGrid-cM0FFpq6.js";import{G as ne,a as ie}from"./GridToolbarColumnsButton-BnKMud6j.js";import"./index-q81m-9gd.js";import"./DialogActions-wvrfoWGb.js";import"./ListItem-iEfVvsPe.js";import"./Chip-8HIaCVOq.js";import"./DialogContent-PZfO3X9Z.js";import"./dialogTitleClasses-bguNBaBC.js";import"./Autocomplete-nLjhnkfB.js";import"./Close-WYfdXw2Y.js";import"./ClickAwayListener-a3KPNHUm.js";import"./Checkbox-cmHmjMjI.js";import"./SwitchBase-GReH0YHb.js";import"./Switch-4EoByK6Q.js";import"./Skeleton-HvX1xqdt.js";import"./CircularProgress-otiFQZT3.js";import"./TablePagination-N6zTghaH.js";import"./KeyboardArrowRight-GMUBF4yd.js";import"./FirstPage-tIzHEnDS.js";import"./TableCell-S3QnDOcP.js";import"./FormControlLabel-ZMimMnGE.js";function v({filters:t,onFilters:o,dateError:d,GetAllCompanyData:l,selectCompany:m,setSelectCompany:u}){const x=n.useCallback(s=>{u(s.target.value),o("companyId",s.target.value)},[o]),b=n.useCallback(s=>{o("startDate",s)},[o]),c=n.useCallback(s=>{o("endDate",s)},[o]);return e.jsxs(e.Fragment,{children:[e.jsx(y,{label:"Start date",value:t.startDate,onChange:b,slotProps:{textField:{fullWidth:!0}},sx:{maxWidth:{md:300}}}),e.jsx(y,{label:"End date",value:t.endDate,onChange:c,slotProps:{textField:{fullWidth:!0,error:d}},sx:{maxWidth:{md:300},[`& .${_.root}`]:{position:{md:"absolute"},bottom:{md:-40}}}}),e.jsxs(ee,{sx:{maxWidth:{md:240},width:"100%"},children:[e.jsx(te,{id:"demo-simple-select-helper-label",shrink:!!m,children:"Company Name"}),e.jsx(ae,{labelId:"demo-simple-select-helper-label",id:"demo-simple-select-helper",value:m,label:"Company Name",onChange:x,children:l==null?void 0:l.map(s=>e.jsx(Y,{value:s.companyId,children:s.companyName},s.companyId))})]})]})}v.propTypes={dateError:r.bool,filters:r.object,onFilters:r.func};function S({params:t}){return e.jsx(i,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},children:t.row.docNumber})}S.propTypes={params:r.shape({row:r.object})};function W({params:t}){return e.jsx(i,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},children:t.row.name})}W.propTypes={params:r.shape({row:r.object})};function N({params:t}){return e.jsx(i,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},children:j(t.row.date)})}N.propTypes={params:r.shape({row:r.object})};function R({params:t}){return e.jsx(i,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},children:t.row.class})}R.propTypes={params:r.shape({row:r.object})};function I({params:t}){return e.jsx(i,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},children:t.row.account})}I.propTypes={params:r.shape({row:r.object})};function M({params:t}){return e.jsx(i,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},children:t.row.type})}M.propTypes={params:r.shape({row:r.object})};function F({params:t}){return e.jsx(i,{sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},children:`${H(t.row.amount)}`})}F.propTypes={params:r.shape({row:r.object})};function E({params:t}){return e.jsx(i,{sx:{whiteSpace:"wrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},children:t.row.description})}E.propTypes={params:r.shape({row:r.object})};r.shape({row:r.object});function O(){const t=new Date;return new Date(t.setDate(t.getDate()-7))}const T={search:"",startDate:O(),endDate:new Date,companyId:""};function de(){$();const{GetAllCompanyData:t}=q(),[o,d]=n.useState(!0),[l,m]=n.useState(T),u=re(l.startDate,l.endDate),[x,b]=n.useState([]),[c,s]=n.useState(0),[h,C]=n.useState(null);n.useEffect(()=>{o&&k()},[o,h]),n.useEffect(()=>{var a;t.length>0&&h===null&&C((a=t[0])==null?void 0:a.companyId)},[t]);const k=async()=>{const a={searchStartDate:j(l.startDate),searchEndDate:j(l.endDate),search:l.search,companyId:h||l.companyId},{result:p,isLoading:w}=await se(a),f=(p==null?void 0:p.map((A,L)=>({...A,id:L})))||[];s(f==null?void 0:f.length),b(f),d(w)},G=n.useCallback((a,p)=>{m(w=>({...w,[a]:p})),d(!0)},[]),P=()=>{const a={...T,startDate:O(),endDate:new Date};m(a),d(!0)},B=[{field:"type",headerName:"Transaction Type",minWidth:150,editable:!1,hideable:!1,filterable:!1,renderCell:a=>e.jsx(M,{params:a})},{field:"date",headerName:"Date",minWidth:120,editable:!1,hideable:!1,filterable:!1,renderCell:a=>e.jsx(N,{params:a})},{field:"docNumber",headerName:"Num",flex:1,minWidth:250,filterable:!1,disableColumnMenu:!0,renderCell:a=>e.jsx(S,{params:a})},{field:"name",headerName:"Name",editable:!1,flex:1,minWidth:250,filterable:!1,disableColumnMenu:!0,renderCell:a=>e.jsx(W,{params:a})},{field:"description",headerName:"Memo/Description",editable:!1,minWidth:600,filterable:!1,disableColumnMenu:!0,renderCell:a=>e.jsx(E,{params:a})},{field:"account",headerName:"Account",editable:!1,minWidth:250,filterable:!1,disableColumnMenu:!0,renderCell:a=>e.jsx(I,{params:a})},{field:"class",headerName:"Class",editable:!1,minWidth:180,filterable:!1,disableColumnMenu:!0,renderCell:a=>e.jsx(R,{params:a})},{field:"amount",headerName:"Amount",editable:!1,minWidth:180,filterable:!1,disableColumnMenu:!0,renderCell:a=>e.jsx(F,{params:a})}];return e.jsx(e.Fragment,{children:e.jsxs(z,{maxWidth:!1,sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[e.jsx(Z,{heading:"Transaction Details by Account",links:[{name:"Dashboard",href:U.dashboard.root},{name:"Transaction Detail Report"}],action:e.jsx(V,{display:"flex",gap:2,children:e.jsx(J,{variant:"outlined",startIcon:e.jsx(K,{icon:"material-symbols:refresh"}),onClick:P,children:"Refresh"})}),sx:{mb:{xs:3,md:5}}}),e.jsxs(oe,{sx:{height:{xs:800,md:2},flexGrow:{md:1},display:{md:"flex"},flexDirection:{md:"column"}},children:[e.jsx(le,{rowCount:c,rows:x,columns:B,loading:o,paginationMode:"server",pageSizeOptions:[],hideFooterPagination:!0,disableColumnMenu:!0,slots:{toolbar:()=>e.jsx(e.Fragment,{children:e.jsxs(ne,{children:[e.jsx(v,{filters:l,dateError:u,onFilters:G,setSelectCompany:C,selectCompany:h,GetAllCompanyData:t}),e.jsx(D,{spacing:1,flexGrow:1,direction:"row",alignItems:"center",justifyContent:"flex-end",children:e.jsx(ie,{})})]})}),noRowsOverlay:()=>e.jsx(g,{title:"No Data"}),noResultsOverlay:()=>e.jsx(g,{title:"No results found"})}}),e.jsx(D,{sx:{p:2,display:"flex",justifyContent:"flex-end",flexDirection:"row"},children:e.jsxs(Q,{variant:"body2",sx:{pr:2},children:["1â€“0 of ",c]})})]})]})})}function Ye(){return e.jsxs(e.Fragment,{children:[e.jsx(X,{children:e.jsx("title",{children:"  Transaction Details Report "})}),e.jsx(de,{})]})}export{Ye as default};
