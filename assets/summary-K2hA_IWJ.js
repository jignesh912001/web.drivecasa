import{k as v,r as c,j as e,S as F,i as H,f as W,t as _,K as z,T as G,q as V,e as de,e9 as me,l as ce,d_ as fe,m as he,p as pe,H as ue}from"./index-WqsZrxyt.js";import{C as xe}from"./custom-breadcrumbs-QEqK1FU9.js";import{i as je}from"./format-time-_tAHxme9.js";import{b as be,f as C}from"./Common-WQZT-o7s.js";import{F as De}from"./file-data-activity-hG-X15XR.js";import{b as Ce,N as Se}from"./neoVerify-rNC64TqR.js";import{D as $}from"./DatePicker-qNTB6Vx9.js";import{f as ge}from"./TextField-2tCbVTps.js";import{E as R}from"./empty-content-pcnM5i_i.js";import{u as J}from"./use-table-hwufPPQ0.js";import{f as Z,a as j}from"./table-pagination-custom-GC-hbQqr.js";import{A as q,a as K,b as U}from"./AccordionDetails-ZH51h6Ew.js";import{T as Q,a as X,b as N}from"./TableContainer-IAKV6XcT.js";import{T as s}from"./TablePagination-8T-6Azdf.js";import{a as Ne,b as We,c as ye,d as Ae,e as Me,f as we,i as Te,j as ve,k as ke,l as Fe}from"./report-table-row-Kbh-uAZe.js";import{u as k,w as Re}from"./xlsx-_hdJyjoG.js";import{C as I}from"./Card-O5fbCiLF.js";import{D as Ie}from"./DialogContent-eTSRr2KN.js";import{D as Ee}from"./DataGrid-jGYekJ6o.js";import{G as Pe,a as Oe}from"./GridToolbarColumnsButton-jDWQ4v37.js";import"./index-q81m-9gd.js";import"./use-chart-jPrVpt5B.js";import"./CardHeader-MvVLinMv.js";import"./index-sVjMNdP9.js";import"./DialogActions-b1hCZYzf.js";import"./ListItem-yeMYz7Q-.js";import"./Chip-rCFgLS50.js";import"./Select-HPWYeYpR.js";import"./Checkbox-1fwRKLt1.js";import"./SwitchBase-8LveF_ZT.js";import"./FormControlLabel-AH9kGeIu.js";import"./Switch-xDKdgofk.js";import"./KeyboardArrowRight-gCRRsuQJ.js";import"./FirstPage-mmzZ9e_V.js";import"./Box-0OsFGcRk.js";import"./Stack-PQ2oSg1k.js";import"./dialogTitleClasses-xL_tORQ1.js";import"./Autocomplete-Al4Vq1-g.js";import"./Close-16ONv8pR.js";import"./ClickAwayListener-wbKmcdvB.js";import"./Skeleton-XQIQz_gb.js";import"./CircularProgress-XAfFJQY1.js";function L({filters:r,onFilters:o,dateError:d}){const a=c.useCallback(i=>{o("startDate",i)},[o]),b=c.useCallback(i=>{o("endDate",i)},[o]);return e.jsx(e.Fragment,{children:e.jsxs(F,{spacing:2,alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:1}},children:[e.jsx($,{label:"Start date",value:r.startDate,onChange:a,slotProps:{textField:{fullWidth:!0}},sx:{maxWidth:{md:200}}}),e.jsx($,{label:"End date",value:r.endDate,onChange:b,slotProps:{textField:{fullWidth:!0,error:d}},sx:{maxWidth:{md:200},[`& .${ge.root}`]:{position:{md:"absolute"},bottom:{md:-40}}}})]})})}L.propTypes={dateError:v.bool,filters:v.object,onFilters:v.func};const Ye=({neoAppDataSummaryPercents:r})=>{const o=J();return e.jsx(H,{sx:{width:"100%"},children:e.jsxs(q,{children:[e.jsx(K,{expandIcon:e.jsx(W,{icon:"ooui:expand"}),"aria-controls":"panel1-content",id:"panel1-header",sx:{fontWeight:"bold"},children:"Neo Status"}),e.jsx(U,{children:e.jsx(_,{children:e.jsx(Q,{component:z,children:e.jsxs(X,{size:o.dense?"small":"medium",children:[e.jsx(Z,{children:e.jsxs(j,{children:[e.jsx(s,{children:"Status"}),e.jsx(s,{align:"left",children:"Neo Status"}),e.jsx(s,{align:"center"})]})}),e.jsxs(N,{children:[e.jsxs(j,{children:[e.jsx(s,{sx:{fontWeight:"bold"},children:"Working"}),e.jsx(s,{children:"Active, Application Submitted, Appointment Set, Fresh (within 30 days), Pending, Underwriting Ready"})]}),e.jsxs(j,{children:[e.jsx(s,{sx:{fontWeight:"bold"},children:"Approved"}),e.jsx(s,{children:"Dead, Sold, Sold - Outside Finan, Sold & Verified (if sold date or DMS Id not there)"})]}),e.jsxs(j,{children:[e.jsx(s,{sx:{fontWeight:"bold"},children:"Ignored"}),e.jsx(s,{children:"Duplicate-Ignore"})]}),e.jsxs(j,{children:[e.jsx(s,{sx:{fontWeight:"bold"},children:"Sold"}),e.jsx(s,{children:"Sold, Sold - Outside Finan, Sold & Verified (Sold Date and DMS Id should be there)"})]}),e.jsxs(j,{children:[e.jsx(s,{sx:{fontWeight:"bold"},children:"Rejected"}),e.jsx(s,{children:"Rejected, Fresh (Older than 30 days)"})]}),e.jsxs(j,{children:[e.jsx(s,{sx:{fontWeight:"bold"},children:"Other"}),e.jsx(s,{children:"Application Ready, Approved - Not Sold, Assign Salesperson, Charged Off, Conditional Approval, Incomplete, Low Balance, Review"})]})]})]})})})})]})})},Be=({loading:r,totalCount:o,tableDataStatuswise:d,seriesLabel:a,handleRefreshPage:b})=>{const i=[{field:"appFirstName",headerName:"FirstName",flex:1,minWidth:180,editable:!1,hideable:!1,filterable:!1},{field:"appLastName",headerName:"LastName",flex:1,minWidth:180,editable:!1,hideable:!1,filterable:!1},{field:"email",headerName:"Email",flex:1,minWidth:300,editable:!1,hideable:!1,filterable:!1,renderCell:n=>e.jsx(Ne,{params:n})},{field:"dmsId",headerName:"DmsId",flex:1,minWidth:180,filterable:!1,disableColumnMenu:!0},{field:"cellNumber",headerName:"Number",flex:1,minWidth:180,filterable:!1,disableColumnMenu:!0,renderCell:n=>e.jsx(We,{params:n})},{field:"applicationDate",headerName:"Application Date",flex:1,minWidth:180,filterable:!1,disableColumnMenu:!0,renderCell:n=>e.jsx(ye,{params:n})},{field:"combAppSoldDate",headerName:"CombAppSold Date",flex:1,minWidth:180,filterable:!1,disableColumnMenu:!0,renderCell:n=>e.jsx(Ae,{params:n})},{field:"completionTime",headerName:"Completion Time",flex:1,minWidth:180,filterable:!1,disableColumnMenu:!0,renderCell:n=>e.jsx(Me,{params:n})},{field:"soldDate",headerName:"Sold Date",flex:1,minWidth:120,filterable:!1,disableColumnMenu:!0,renderCell:n=>e.jsx(we,{params:n})},{field:"type",headerName:"Type",flex:1,minWidth:120,filterable:!1,disableColumnMenu:!0},{field:"dealership",headerName:"Dealership",flex:1,minWidth:120,filterable:!1,disableColumnMenu:!0},{field:"score",headerName:"Score",flex:1,minWidth:120,filterable:!1,disableColumnMenu:!0},{field:"grade",headerName:"Grade",flex:1,minWidth:120,filterable:!1,disableColumnMenu:!0},{field:"customTag",headerName:"Custom Tag",flex:1,minWidth:120,filterable:!1,disableColumnMenu:!0},{field:"approvalTier",headerName:"ApprovalTier",flex:1,minWidth:120,filterable:!1,disableColumnMenu:!0},{field:"salesperson",headerName:"Sales person",flex:1,minWidth:180,filterable:!1,disableColumnMenu:!0},{field:"decisionedBy",headerName:"Decisioned",flex:1,minWidth:180,filterable:!1,disableColumnMenu:!0},{field:"verifier",headerName:"Verifier",flex:1,minWidth:180,filterable:!1,disableColumnMenu:!0},{field:"advActionLetter",headerName:"AdvActionLetter",flex:1,minWidth:120,filterable:!1,disableColumnMenu:!0},{field:"referralSource",headerName:"Referral Source",flex:1,minWidth:180,filterable:!1,disableColumnMenu:!0},{field:"referralSourceDetail",headerName:"Referral Source Detail",flex:1,minWidth:180,filterable:!1,disableColumnMenu:!0},{field:"homeNumber",headerName:"Home Number",flex:1,minWidth:120,filterable:!1,disableColumnMenu:!0},{field:"paycallTier",headerName:"PaycallTier",flex:1,minWidth:120,filterable:!1,disableColumnMenu:!0},{field:"proofOfIncome",headerName:"ProofOfIncome",flex:1,minWidth:120,filterable:!1,disableColumnMenu:!0},{field:"pti",headerName:"PTI",flex:1,minWidth:120,filterable:!1,disableColumnMenu:!0},{field:"creditScore",headerName:"CreditScore",flex:1,minWidth:120,filterable:!1,disableColumnMenu:!0},{field:"repossession",headerName:"Repossession",flex:1,minWidth:120,filterable:!1,disableColumnMenu:!0},{field:"applicantZipcode",headerName:"Applicant Zipcode",flex:1,minWidth:120,filterable:!1,disableColumnMenu:!0},{field:"zipCode",headerName:"Zipcode",flex:1,minWidth:120,filterable:!1,disableColumnMenu:!0},{field:"income",headerName:"Income",flex:1,minWidth:120,filterable:!1,disableColumnMenu:!0,renderCell:n=>e.jsx(Te,{params:n})},{field:"downpayment",headerName:"Downpayment",flex:1,minWidth:120,filterable:!1,disableColumnMenu:!0,renderCell:n=>e.jsx(ve,{params:n})},{field:"monthlyPayment",headerName:"Monthly Payment",flex:1,minWidth:180,filterable:!1,disableColumnMenu:!0,renderCell:n=>e.jsx(ke,{params:n})},{field:"status",headerName:"Status",flex:1,minWidth:120,filterable:!1,disableColumnMenu:!0,renderCell:n=>e.jsx(Fe,{params:n})},{field:"notes",headerName:"Notes",flex:1,minWidth:180,filterable:!1,disableColumnMenu:!0}],y=()=>{let n="";a!=null&&a.seriesName?n=`${a.seriesName}-${a.searchStartDate}-TO-${a.searchEndDate}.xlsx`:n=`All Data - ${a==null?void 0:a.searchStartDate}-TO-${a==null?void 0:a.searchEndDate}.xlsx`;const m=i.map(g=>g.headerName),A=d.map(g=>i.map(T=>g[T.field])),M=[m,...A],w=k.aoa_to_sheet(M),S=k.book_new();k.book_append_sheet(S,w,"Sheet1"),Re(S,n),de("Download successful."),handleClose(!1)};return e.jsx(e.Fragment,{children:e.jsxs(I,{children:[e.jsx(Ie,{sx:{maxWidth:"100%",height:500},children:e.jsx(Ee,{rowCount:o,rows:d,columns:i,loading:r,paginationMode:"server",pageSizeOptions:[],hideFooterPagination:!0,stickyHeader:!0,disableColumnMenu:!0,slots:{toolbar:()=>e.jsx(e.Fragment,{children:e.jsxs(Pe,{children:[e.jsxs(G,{variant:"h6",children:[a!=null&&a.seriesName?a==null?void 0:a.seriesName:"All Data"," : ",a==null?void 0:a.searchStartDate," To ",a==null?void 0:a.searchEndDate,"   "]}),e.jsxs(F,{spacing:1,flexGrow:1,direction:"row",alignItems:"center",justifyContent:"flex-end",children:[e.jsx(V,{variant:"contained",color:"primary",onClick:y,startIcon:e.jsx(W,{icon:"eva:cloud-download-fill"}),children:"Download"}),e.jsx(V,{variant:"outlined",startIcon:e.jsx(W,{icon:"material-symbols:refresh"}),onClick:b,children:"Refresh"}),e.jsx(Oe,{})]})]})}),noRowsOverlay:()=>e.jsx(R,{title:"No Data"}),noResultsOverlay:()=>e.jsx(R,{title:"No results found"})}})}),e.jsx(F,{sx:{p:2,display:"flex",justifyContent:"flex-end",flexDirection:"row"},children:e.jsxs(G,{variant:"body2",sx:{pr:2},children:["1â€“0 of ",o]})})]})})},Ge=({neoAppDataSummaryPercents:r})=>{const o=J();return e.jsx(H,{sx:{width:"100%"},children:e.jsxs(q,{children:[e.jsx(K,{expandIcon:e.jsx(W,{icon:"ooui:expand"}),"aria-controls":"panel1-content",id:"panel1-header",sx:{fontWeight:"bold"},children:"Neo AppData Summary Percents"}),e.jsx(U,{children:e.jsx(_,{children:e.jsx(Q,{component:z,children:e.jsxs(X,{size:(o.dense,"small"),children:[e.jsx(Z,{children:e.jsxs(j,{children:[e.jsx(s,{}),r.map((d,a)=>e.jsx(s,{children:d.monthName},a))]})}),e.jsxs(N,{children:[e.jsx(s,{sx:{fontWeight:"bold"},children:"Book To Look"}),r.map((d,a)=>e.jsxs(s,{children:[d.bookToLookPercentage," %"]},a))]}),e.jsxs(N,{children:[e.jsx(s,{sx:{fontWeight:"bold"},children:"Book To Approved"}),r.map((d,a)=>e.jsxs(s,{children:[d.bookToApprovedPercentage," %"]},a))]}),e.jsxs(N,{children:[e.jsx(s,{sx:{fontWeight:"bold"},children:"Approved"}),r.map((d,a)=>e.jsxs(s,{children:[d.approvedPercentage," %"]},a))]})]})})})})]})})},Ve={search:"",startDate:be(),endDate:new Date},$e=()=>{const r=me();ce();const[o,d]=c.useState(!0),[a,b]=c.useState(!1),[i,y]=c.useState(Ve),n=je(i.startDate,i.endDate),[m,A]=c.useState([]),[M,w]=c.useState([]),[S,g]=c.useState(Array);c.useState(!1),c.useState([]);const[T,ee]=c.useState(0),[te,E]=c.useState();c.useEffect(()=>{o&&(ae(),O())},[o]);const ae=async()=>{var p;const t={searchStartDate:C(i.startDate),searchEndDate:C(i.endDate),search:i.search},{result:l,isLoading:f}=await Ce(t),h=((p=l==null?void 0:l.neoAppDataStatusWiseSummary)==null?void 0:p.map((u,x)=>({...u,id:x})))||[];g(l==null?void 0:l.neoAppDataSummaryPercents),A(h),d(f)},P=async t=>{const{result:l,isLoading:f}=await Se(t),h=(l==null?void 0:l.map((p,u)=>({...p,id:u})))||[];ee(h==null?void 0:h.length),w(h),b(f)},le=c.useCallback((t,l)=>{y(f=>({...f,[t]:l})),d(!0)},[]),ne={labels:m==null?void 0:m.map(t=>[t.monthYear,`Total : ${t.totalApplications}`]),colors:[r.palette.primary.main,r.palette.error.main,r.palette.warning.main,r.palette.text.disabled],series:[{type:"Month",data:[{name:"Working Applications",data:m==null?void 0:m.map(t=>t.workingApplications)},{name:"Approved Applications",data:m.map(t=>t.approvedApplications)},{name:"Ignored Application",data:m.map(t=>t.ignoredApplications)},{name:"Rejected Application",data:m.map(t=>t.rejectedApplications)},{name:"Sold Application",data:m.map(t=>t.soldApplications)},{name:"Other Applications",data:m.map(t=>t.otherApplications)}],options:{}}]},ie=(t,l)=>{t=t+1,l=+("20"+l);const f=i.startDate.getFullYear(),h=i.startDate.getMonth()+1,p=i.endDate.getFullYear(),u=i.endDate.getMonth()+1;console.log("1  start ---> ",{startYear:f,startMonth:h}),console.log("2 end ---> ",{endYear:p,endMonth:u}),console.log("3 end ---> ",{month:t,year:l});let x="",D="";return t===h&&l===f&&t===u&&l===p?(x=i.startDate,D=i.endDate):t===h&&l===f?(x=i.startDate,D=new Date(l,t,0)):t===u&&l===p?(x=new Date(l,t-1,1),D=i.endDate):(x=new Date(l,t-1,1),D=new Date(l,t,0)),{startDate:x,endDate:D}},se=async t=>{b(!0);const{label:l,seriesName:f}=t,h=l?l==null?void 0:l.split(" ")[0]:null,p=l?l==null?void 0:l.split(" ")[1]:null,u=f?f.split(" ")[0]:null;if(h){const x=p?parseInt(p,10):new Date().getFullYear(),Y={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11}[h],{startDate:re,endDate:oe}=ie(Y,x);if(Y!==void 0){const B={searchStartDate:C(re),searchEndDate:C(oe),status:u,seriesName:f,search:""};E(B),await P(B)}else console.log("Invalid month label")}},O=async()=>{const t={searchStartDate:C(i.startDate),searchEndDate:C(i.endDate),status:"",search:""};E(t),b(!0),await P(t)};return e.jsx(e.Fragment,{children:o?e.jsx(fe,{}):e.jsxs(he,{maxWidth:!1,sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[e.jsx(xe,{heading:"Monthly Status Wise Summary",links:[{name:"Dashboard",href:pe.dashboard.root},{name:"Monthly Status Wise Summary"}],sx:{mb:{xs:3,md:3}}}),e.jsx(L,{filters:i,dateError:n,onFilters:le}),m.length>0?e.jsx(De,{title:"",chart:ne,handleChartClick:se}):e.jsx(R,{title:"No Data"}),e.jsx(I,{sx:{mb:2,marginTop:"20px"},children:e.jsx(Ye,{})}),S&&e.jsx(I,{sx:{mb:3,marginTop:"20px"},children:e.jsx(Ge,{neoAppDataSummaryPercents:S})}),e.jsx(Be,{loading:a,handleRefreshPage:O,totalCount:T,seriesLabel:te,tableDataStatuswise:M})]})})},He=$e;function Rt(){return e.jsxs(e.Fragment,{children:[e.jsx(ue,{children:e.jsx("title",{children:"Neo Verify | Monthly Status Wise Summary"})}),e.jsx(He,{})]})}export{Rt as default};
