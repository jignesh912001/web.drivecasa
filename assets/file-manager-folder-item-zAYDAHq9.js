import{r as l,h as J,j as e,A as K,x as _,V as ie,q as C,f as r,C as $,M as S,J as G,k as n,W as Q,I as ae,t as X,bt as te,c as y,S as x,d as P,i as w,cM as le,T as L,cN as ce,ad as de,R as pe,ab as xe,ac as he,K as ue}from"./index-kRLXSnYb.js";import{d as Y}from"./format-number-Kck_p1h_.js";import{C as me}from"./confirm-dialog-2-k61Lb7.js";import{L as je}from"./ListItem-mZ79RUB5.js";import{D as Z}from"./DialogTitle-JPRL3x2S.js";import{D as ee}from"./DialogContent-X0PYHqDf.js";import{T as B}from"./TextField-LgVzfg2l.js";import{D as oe}from"./DialogActions-ZEpFCQ2N.js";import{a as ge}from"./format-time-fjZ5sEqX.js";import{A as fe}from"./Autocomplete-mTTV3k6o.js";import{C as ve}from"./Chip-kyyRbGwx.js";import{C as U}from"./Checkbox-U5pzLUUV.js";import{b as Ce}from"./upload-avatar-EivYTVCT.js";import{A as be}from"./AvatarGroup-u65qRGj0.js";function ye(){const[o,i]=l.useState(null);return{copiedText:o,copy:async s=>{if(!(navigator!=null&&navigator.clipboard))return console.warn("Clipboard not supported"),!1;try{return await navigator.clipboard.writeText(s),i(s),!0}catch(t){return console.warn("Copy failed",t),i(null),!1}}}}function V({person:o}){const[i,c]=l.useState(o.permission),s=J(),t=l.useCallback(h=>{c(h)},[]);return e.jsxs(e.Fragment,{children:[e.jsxs(je,{sx:{px:0,py:1},children:[e.jsx(K,{alt:o.name,src:o.avatarUrl,sx:{mr:2}}),e.jsx(_,{primary:o.name,secondary:e.jsx(ie,{title:o.email,children:e.jsx("span",{children:o.email})}),primaryTypographyProps:{noWrap:!0,typography:"subtitle2"},secondaryTypographyProps:{noWrap:!0,component:"span"},sx:{flexGrow:1,pr:1}}),e.jsxs(C,{size:"small",color:"inherit",endIcon:e.jsx(r,{width:20,icon:s.open?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill",sx:{ml:-1}}),onClick:s.onOpen,sx:{flexShrink:0,...s.open&&{bgcolor:"action.selected"}},children:["Can ",i]})]}),e.jsx($,{open:s.open,onClose:s.onClose,sx:{width:160},children:e.jsxs(e.Fragment,{children:[e.jsxs(S,{selected:i==="view",onClick:()=>{s.onClose(),t("view")},children:[e.jsx(r,{icon:"solar:eye-bold"}),"Can view"]}),e.jsxs(S,{selected:i==="edit",onClick:()=>{s.onClose(),t("edit")},children:[e.jsx(r,{icon:"solar:pen-bold"}),"Can edit"]}),e.jsx(G,{sx:{borderStyle:"dashed"}}),e.jsxs(S,{onClick:()=>{s.onClose()},sx:{color:"error.main"},children:[e.jsx(r,{icon:"solar:trash-bin-trash-bold"}),"Remove"]})]})})]})}V.propTypes={person:n.object};function q({shared:o,inviteEmail:i,onCopyLink:c,onChangeInvite:s,open:t,onClose:h,...f}){const v=o&&!!o.length;return e.jsxs(Q,{fullWidth:!0,maxWidth:"xs",open:t,onClose:h,...f,children:[e.jsx(Z,{children:" Invite "}),e.jsxs(ee,{sx:{overflow:"unset"},children:[s&&e.jsx(B,{fullWidth:!0,value:i,placeholder:"Email",onChange:s,InputProps:{endAdornment:e.jsx(ae,{position:"end",children:e.jsx(C,{color:"inherit",variant:"contained",disabled:!i,sx:{mr:-.75},children:"Send Invite"})})},sx:{mb:2}}),v&&e.jsx(X,{sx:{maxHeight:60*6},children:e.jsx(te,{disablePadding:!0,children:o.map(u=>e.jsx(V,{person:u},u.id))})})]}),e.jsxs(oe,{sx:{justifyContent:"space-between"},children:[c&&e.jsx(C,{startIcon:e.jsx(r,{icon:"eva:link-2-fill"}),onClick:c,children:"Copy link"}),h&&e.jsx(C,{variant:"outlined",color:"inherit",onClick:h,children:"Close"})]})]})}q.propTypes={inviteEmail:n.string,onChangeInvite:n.func,onClose:n.func,onCopyLink:n.func,open:n.bool,shared:n.array};function ne({item:o,open:i,favorited:c,onFavorite:s,onCopyLink:t,onClose:h,onDelete:f,...v}){const{name:u,size:b,url:I,type:k,shared:j,modifiedAt:T}=o,g=j&&!!j.length,d=y(!0),m=y(),F=y(!0),[D,z]=l.useState(""),[R,A]=l.useState(o.tags.slice(0,3)),W=l.useCallback(a=>{z(a.target.value)},[]),M=l.useCallback(a=>{A(a)},[]),O=e.jsxs(x,{spacing:1.5,children:[e.jsxs(x,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{typography:"subtitle2"},children:["Tags",e.jsx(P,{size:"small",onClick:d.onToggle,children:e.jsx(r,{icon:d.value?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"})})]}),d.value&&e.jsx(fe,{multiple:!0,freeSolo:!0,options:o.tags.map(a=>a),getOptionLabel:a=>a,defaultValue:o.tags.slice(0,3),value:R,onChange:(a,p)=>{M(p)},renderOption:(a,p)=>l.createElement("li",{...a,key:p},p),renderTags:(a,p)=>a.map((H,re)=>l.createElement(ve,{...p({index:re}),size:"small",variant:"soft",label:H,key:H})),renderInput:a=>e.jsx(B,{...a,placeholder:"#Add a tags"})})]}),N=e.jsxs(x,{spacing:1.5,children:[e.jsxs(x,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{typography:"subtitle2"},children:["Properties",e.jsx(P,{size:"small",onClick:F.onToggle,children:e.jsx(r,{icon:F.value?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"})})]}),F.value&&e.jsxs(e.Fragment,{children:[e.jsxs(x,{direction:"row",sx:{typography:"caption",textTransform:"capitalize"},children:[e.jsx(w,{component:"span",sx:{width:80,color:"text.secondary",mr:2},children:"Size"}),Y(b)]}),e.jsxs(x,{direction:"row",sx:{typography:"caption",textTransform:"capitalize"},children:[e.jsx(w,{component:"span",sx:{width:80,color:"text.secondary",mr:2},children:"Modified"}),ge(T)]}),e.jsxs(x,{direction:"row",sx:{typography:"caption",textTransform:"capitalize"},children:[e.jsx(w,{component:"span",sx:{width:80,color:"text.secondary",mr:2},children:"Type"}),le(k)]})]})]}),E=e.jsxs(e.Fragment,{children:[e.jsxs(x,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{p:2.5},children:[e.jsx(L,{variant:"subtitle2",children:" File Share With "}),e.jsx(P,{size:"small",color:"primary",onClick:m.onTrue,sx:{width:24,height:24,bgcolor:"primary.main",color:"primary.contrastText","&:hover":{bgcolor:"primary.dark"}},children:e.jsx(r,{icon:"mingcute:add-line"})})]}),g&&e.jsx(w,{sx:{pl:2.5,pr:1},children:j.map(a=>e.jsx(V,{person:a},a.id))})]});return e.jsxs(e.Fragment,{children:[e.jsxs(ce,{open:i,onClose:h,anchor:"right",slotProps:{backdrop:{invisible:!0}},PaperProps:{sx:{width:320}},...v,children:[e.jsxs(X,{sx:{height:1},children:[e.jsxs(x,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{p:2.5},children:[e.jsx(L,{variant:"h6",children:" Info "}),e.jsx(U,{color:"warning",icon:e.jsx(r,{icon:"eva:star-outline"}),checkedIcon:e.jsx(r,{icon:"eva:star-fill"}),checked:c,onChange:s})]}),e.jsxs(x,{spacing:2.5,justifyContent:"center",sx:{p:2.5,bgcolor:"background.neutral"},children:[e.jsx(de,{imageView:!0,file:k==="folder"?k:I,sx:{width:64,height:64},imgSx:{borderRadius:1}}),e.jsx(L,{variant:"subtitle1",sx:{wordBreak:"break-all"},children:u}),e.jsx(G,{sx:{borderStyle:"dashed"}}),O,N]}),E]}),e.jsx(w,{sx:{p:2.5},children:e.jsx(C,{fullWidth:!0,variant:"soft",color:"error",size:"large",startIcon:e.jsx(r,{icon:"solar:trash-bin-trash-bold"}),onClick:f,children:"Delete"})})]}),e.jsx(q,{open:m.value,shared:j,inviteEmail:D,onChangeInvite:W,onCopyLink:t,onClose:()=>{m.onFalse(),z("")}})]})}ne.propTypes={open:n.bool,item:n.object,onClose:n.func,onDelete:n.func,favorited:n.bool,onCopyLink:n.func,onFavorite:n.func};function we({title:o,subTitle:i,link:c,onOpen:s,collapse:t,onCollapse:h,sx:f,...v}){return e.jsxs(x,{direction:"row",alignItems:"center",sx:{mb:3,...f},...v,children:[e.jsxs(x,{flexGrow:1,children:[e.jsxs(x,{direction:"row",alignItems:"center",spacing:1,flexGrow:1,children:[e.jsxs(L,{variant:"h6",children:[" ",o," "]}),e.jsx(P,{size:"small",color:"primary",onClick:s,sx:{width:24,height:24,bgcolor:"primary.main",color:"primary.contrastText","&:hover":{bgcolor:"primary.dark"}},children:e.jsx(r,{icon:"mingcute:add-line"})})]}),e.jsx(w,{sx:{typography:"body2",color:"text.disabled",mt:.5},children:i})]}),c&&e.jsx(C,{href:c,component:pe,size:"small",color:"inherit",endIcon:e.jsx(r,{icon:"eva:arrow-ios-forward-fill",width:18,sx:{ml:-.5}}),children:"View All"}),h&&e.jsx(P,{onClick:h,children:e.jsx(r,{icon:t?"eva:arrow-ios-downward-fill":"eva:arrow-ios-upward-fill"})})]})}we.propTypes={collapse:n.bool,link:n.string,onCollapse:n.func,onOpen:n.func,subTitle:n.string,sx:n.object,title:n.string};function se({title:o="Upload Files",open:i,onClose:c,onCreate:s,onUpdate:t,folderName:h,onChangeFolderName:f,...v}){const[u,b]=l.useState([]);l.useEffect(()=>{i||b([])},[i]);const I=l.useCallback(g=>{const d=g.map(m=>Object.assign(m,{preview:URL.createObjectURL(m)}));b([...u,...d])},[u]),k=()=>{c(),console.info("ON UPLOAD")},j=g=>{const d=u.filter(m=>m!==g);b(d)},T=()=>{b([])};return e.jsxs(Q,{fullWidth:!0,maxWidth:"sm",open:i,onClose:c,...v,children:[e.jsxs(Z,{sx:{p:g=>g.spacing(3,3,2,3)},children:[" ",o," "]}),e.jsxs(ee,{dividers:!0,sx:{pt:1,pb:0,border:"none"},children:[(s||t)&&e.jsx(B,{fullWidth:!0,label:"Folder name",value:h,onChange:f,sx:{mb:3}}),e.jsx(Ce,{multiple:!0,files:u,onDrop:I,onRemove:j})]}),e.jsxs(oe,{children:[e.jsx(C,{variant:"contained",startIcon:e.jsx(r,{icon:"eva:cloud-upload-fill"}),onClick:k,children:"Upload"}),!!u.length&&e.jsx(C,{variant:"outlined",color:"inherit",onClick:T,children:"Remove all"}),(s||t)&&e.jsx(x,{direction:"row",justifyContent:"flex-end",flexGrow:1,children:e.jsx(C,{variant:"soft",onClick:s||t,children:t?"Save":"Create"})})]})]})}se.propTypes={folderName:n.string,onChangeFolderName:n.func,onClose:n.func,onCreate:n.func,onUpdate:n.func,open:n.bool,title:n.string};function ke({folder:o,selected:i,onSelect:c,onDelete:s,sx:t,...h}){var E,a;const{enqueueSnackbar:f}=xe(),{copy:v}=ye(),[u,b]=l.useState(""),[I,k]=l.useState(o.name),j=y(),T=y(),g=y(),d=J(),m=y(),F=y(),D=y(o.isFavorited),z=l.useCallback(p=>{b(p.target.value)},[]),R=l.useCallback(p=>{k(p.target.value)},[]),A=l.useCallback(()=>{f("Copied!"),v(o.url)},[v,f,o.url]),W=e.jsxs(x,{direction:"row",alignItems:"center",sx:{top:8,right:8,position:"absolute"},children:[e.jsx(U,{color:"warning",icon:e.jsx(r,{icon:"eva:star-outline"}),checkedIcon:e.jsx(r,{icon:"eva:star-fill"}),checked:D.value,onChange:D.onToggle}),e.jsx(P,{color:d.open?"inherit":"default",onClick:d.onOpen,children:e.jsx(r,{icon:"eva:more-vertical-fill"})})]}),M=(T.value||i)&&c?e.jsx(U,{size:"medium",checked:i,onClick:c,icon:e.jsx(r,{icon:"eva:radio-button-off-fill"}),checkedIcon:e.jsx(r,{icon:"eva:checkmark-circle-2-fill"}),sx:{p:.75}}):e.jsx(w,{component:"img",src:"/assets/icons/files/ic_folder.svg",sx:{width:36,height:36}}),O=e.jsx(_,{onClick:F.onTrue,primary:o.name,secondary:e.jsxs(e.Fragment,{children:[Y(o.size),e.jsx(w,{component:"span",sx:{mx:.75,width:2,height:2,borderRadius:"50%",bgcolor:"currentColor"}}),o.totalFiles," files"]}),primaryTypographyProps:{noWrap:!0,typography:"subtitle1"},secondaryTypographyProps:{mt:.5,component:"span",alignItems:"center",typography:"caption",color:"text.disabled",display:"inline-flex"}}),N=e.jsx(be,{max:3,sx:{[`& .${he.avatar}`]:{width:24,height:24,"&:first-of-type":{fontSize:12}}},children:(E=o.shared)==null?void 0:E.map(p=>e.jsx(K,{alt:p.name,src:p.avatarUrl},p.id))});return e.jsxs(e.Fragment,{children:[e.jsxs(x,{component:ue,variant:"outlined",spacing:1,alignItems:"flex-start",sx:{p:2.5,maxWidth:222,borderRadius:2,bgcolor:"unset",cursor:"pointer",position:"relative",...(T.value||i)&&{bgcolor:"background.paper",boxShadow:p=>p.customShadows.z20},...t},...h,children:[e.jsx(w,{onMouseEnter:T.onTrue,onMouseLeave:T.onFalse,children:M}),W,O,!!((a=o==null?void 0:o.shared)!=null&&a.length)&&N]}),e.jsxs($,{open:d.open,onClose:d.onClose,arrow:"right-top",sx:{width:160},children:[e.jsxs(S,{onClick:()=>{d.onClose(),A()},children:[e.jsx(r,{icon:"eva:link-2-fill"}),"Copy Link"]}),e.jsxs(S,{onClick:()=>{d.onClose(),g.onTrue()},children:[e.jsx(r,{icon:"solar:share-bold"}),"Share"]}),e.jsxs(S,{onClick:()=>{d.onClose(),j.onTrue()},children:[e.jsx(r,{icon:"solar:pen-bold"}),"Edit"]}),e.jsx(G,{sx:{borderStyle:"dashed"}}),e.jsxs(S,{onClick:()=>{m.onTrue(),d.onClose()},sx:{color:"error.main"},children:[e.jsx(r,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]}),e.jsx(ne,{item:o,favorited:D.value,onFavorite:D.onToggle,onCopyLink:A,open:F.value,onClose:F.onFalse,onDelete:()=>{F.onFalse(),s()}}),e.jsx(q,{open:g.value,shared:o.shared,inviteEmail:u,onChangeInvite:z,onCopyLink:A,onClose:()=>{g.onFalse(),b("")}}),e.jsx(se,{open:j.value,onClose:j.onFalse,title:"Edit Folder",onUpdate:()=>{j.onFalse(),k(I),console.info("UPDATE FOLDER",I)},folderName:I,onChangeFolderName:R}),e.jsx(me,{open:m.value,onClose:m.onFalse,title:"Delete",content:"Are you sure want to delete?",action:e.jsx(C,{variant:"contained",color:"error",onClick:s,children:"Delete"})})]})}ke.propTypes={folder:n.object,onDelete:n.func,onSelect:n.func,selected:n.bool,sx:n.object};export{ne as F,q as a,we as b,ke as c,se as d,ye as u};
